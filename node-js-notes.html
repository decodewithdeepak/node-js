<!DOCTYPE html>
<html>
<head>
<title>node-js-notes.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="nodejs-master-notes-by-deepak-modi">Node.js Master Notes By Deepak Modi</h1>
<blockquote>
<p>Recommended YouTube Playlist: <a href="https://www.youtube.com/playlist?list=PLinedj3B30sDby4Al-i13hQJGQoRQDfPo">Master NodeJS by Piyush Garg</a></p>
</blockquote>
<h2 id="table-of-contents">Table of Contents</h2>
<ol>
<li>
<p><a href="#1-introduction-to-nodejs">Introduction to Node.js</a></p>
<ul>
<li><a href="#11-what-is-nodejs">1.1 What is Node.js?</a></li>
<li><a href="#12-nodejs-installation">1.2 Node.js Installation</a></li>
<li><a href="#13-how-nodejs-works">1.3 How Node.js Works?</a></li>
<li><a href="#14-hello-world-in-nodejs">1.4 Hello World in Node.js</a></li>
</ul>
</li>
<li>
<p><a href="#2-core-concepts">Core Concepts</a></p>
<ul>
<li><a href="#21-modules-in-nodejs">2.1 Modules in Node.js</a></li>
<li><a href="#22-file-handling-in-nodejs">2.2 File Handling in Node.js</a></li>
<li><a href="#23-building-http-server-in-nodejs">2.3 Building HTTP Server in Node.js</a></li>
<li><a href="#24-handling-urls">2.4 Handling URLs</a></li>
<li><a href="#25-http-methods">2.5 HTTP Methods</a></li>
<li><a href="#26-versioning-in-nodejs">2.6 Versioning in Node.js</a></li>
<li><a href="#27-nodejs-package-manager-npm">2.7 Node.js Package Manager (npm)</a></li>
</ul>
</li>
<li>
<p><a href="#3-expressjs-and-apis">Express.js and APIs</a></p>
<ul>
<li><a href="#31-getting-started-with-express">3.1 Getting Started with Express</a></li>
<li><a href="#32-what-is-restful-api">3.2 What is RESTful API?</a></li>
<li><a href="#33-building-rest-apis-with-nodejs--express">3.3 Building REST APIs with Node.js + Express</a></li>
<li><a href="#34-express-middleware">3.4 Express Middleware</a></li>
<li><a href="#35-http-headers-in-apis">3.5 HTTP Headers in APIs</a></li>
<li><a href="#36-http-status-codes">3.6 HTTP Status Codes</a></li>
<li><a href="#37-introduction-to-postman">3.7 Introduction to POSTMAN</a></li>
</ul>
</li>
<li>
<p><a href="#4-database-integration">Database Integration</a></p>
<ul>
<li><a href="#41-introduction-to-mongodb">4.1 Introduction to MongoDB</a></li>
<li><a href="#42-connecting-nodejs-with-mongodb-mongoose--express">4.2 Connecting Node.js with MongoDB (Mongoose + Express)</a></li>
<li><a href="#43-mvc-pattern-in-nodejs">4.3 MVC Pattern in Node.js</a></li>
</ul>
</li>
</ol>
<hr>
<h2 id="1-introduction-to-nodejs">1. Introduction to Node.js</h2>
<h3 id="11-what-is-nodejs">1.1 What is Node.js?</h3>
<p>Node.js is an open-source, cross-platform JavaScript runtime environment that allows you to run JavaScript code outside the browser. Created by Ryan Dahl in 2009. Built on Google Chrome's V8 JavaScript engine, Node.js enables developers to build scalable, high-performance backend applications using JavaScript.</p>
<blockquote>
<p>Example: Backend of Netflix, LinkedIn, PayPal , Uber uses Node.js!</p>
</blockquote>
<ul>
<li><strong>Key Point:</strong> Node.js is not a programming language or a frameworkâ€”it's a runtime environment for executing JavaScript on the server side.</li>
</ul>
<h4 id="why-use-nodejs">Why use Node.js?</h4>
<ul>
<li><strong>Non-blocking I/O:</strong> Handles many connections at once without waiting for operations like file or network access to finish.</li>
<li><strong>Single Language Stack:</strong> Use JavaScript for both frontend and backend, making full-stack development easier.</li>
<li><strong>Fast and Efficient:</strong> Powered by the V8 engine, Node.js is known for its speed.</li>
<li><strong>Large Ecosystem:</strong> npm (Node Package Manager) offers thousands of reusable packages.</li>
<li><strong>Community Support:</strong> Huge, active community and lots of learning resources.</li>
</ul>
<p><strong>Comparison Example:</strong></p>
<ul>
<li>Traditional backend (e.g., PHP, Java): Each request may create a new thread, which is resource-intensive.</li>
<li>Node.js: Uses a single-threaded event loop to handle many requests efficiently.</li>
</ul>
<h4 id="nodejs-in-modern-web-development">Node.js in Modern Web Development</h4>
<p>Node.js is used for:</p>
<ul>
<li>REST APIs</li>
<li>Real-time chat apps (e.g., WhatsApp clones)</li>
<li>Streaming services (e.g., Netflix)</li>
<li>IoT applications</li>
<li>Command-line tools</li>
</ul>
<p><strong>Real-World Example:</strong>
Netflix, PayPal, LinkedIn, and Uber use Node.js for parts of their backend systems.</p>
<h3 id="12-nodejs-installation">1.2 Node.js Installation</h3>
<h4 id="installing-nodejs">Installing Node.js</h4>
<ul>
<li><strong>Windows/Mac/Linux:</strong> Download from <a href="https://nodejs.org/">nodejs.org</a>. Installer includes npm.</li>
<li><strong>Check installation:</strong></li>
</ul>
<pre class="hljs"><code><div>node -v
npm -v
</div></code></pre>
<h4 id="using-repl-read-eval-print-loop">Using REPL (Read-Eval-Print Loop)</h4>
<p>REPL lets you run JavaScript code interactively in the terminal:</p>
<pre class="hljs"><code><div>node
&gt; 2 + 2
4
&gt; .<span class="hljs-built_in">exit</span>
</div></code></pre>
<h4 id="running-scripts">Running Scripts</h4>
<p>Save your code in a <code>.js</code> file and run:</p>
<pre class="hljs"><code><div>node hello.js
</div></code></pre>
<h4 id="using-nodemon-for-development">Using nodemon for Development</h4>
<p><code>nodemon</code> automatically restarts your app when files change.</p>
<pre class="hljs"><code><div>npm install -g nodemon
nodemon app.js
</div></code></pre>
<h3 id="13-how-nodejs-works">1.3 How Node.js Works?</h3>
<p>Node.js operates on an event-driven, non-blocking I/O model that makes it lightweight and efficient for building scalable network applications.  		
The core of Node.js is built around the event loop, which allows Node.js to handle multiple requests without creating new threads for each.</p>
<p><img src="https://d2ms8rpfqc4h24.cloudfront.net/working_flow_of_node_7610f28abc.jpg" alt="Node.js Architecture"></p>
<h4 id="the-event-loop-architecture">The Event Loop Architecture</h4>
<p>The event loop is what allows Node.js to perform non-blocking I/O operations despite JavaScript being single-threaded. When Node.js performs an I/O operation, like reading from the network or accessing a database, instead of blocking and waiting for the operation to complete, Node.js will resume the operation when the response comes back.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// Example demonstrating non-blocking behavior</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Start'</span>);

setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Timeout callback'</span>);
}, <span class="hljs-number">0</span>);

setImmediate(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Immediate callback'</span>);
});

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'End'</span>);

<span class="hljs-comment">// Output: Start, End, Immediate callback, Timeout callback</span>
</div></code></pre>
<h4 id="v8-javascript-engine">V8 JavaScript Engine</h4>
<p>Node.js is built on Google Chrome's V8 JavaScript engine, which compiles JavaScript directly to native machine code instead of interpreting it or executing it as bytecode. This makes Node.js applications incredibly fast and efficient.</p>
<h4 id="libuv-library">libuv Library</h4>
<p>Under the hood, Node.js uses libuv, a multi-platform C library that provides support for asynchronous I/O based on event loops. It handles file system operations, DNS lookup, network operations, and more.</p>
<h3 id="14-hello-world-in-nodejs">1.4 Hello World in Node.js</h3>
<p>Creating your first Node.js application is straightforward and demonstrates the fundamental difference between server-side JavaScript and browser JavaScript. This simple example shows how to execute JavaScript code outside the browser environment.</p>
<pre class="hljs"><code><div><span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Hello Node!'</span>);

<span class="hljs-comment">// console.log(window); // Error in Node.js environment but works in browser</span>
<span class="hljs-comment">// console.log(alert("Hey there!")); // Error in Node.js environment but works in browser</span>
</div></code></pre>
<blockquote>
<p>Note:- Window objects, ui elements, and other browser-specific features are not available in Node.js.</p>
</blockquote>
<p>This example demonstrates a key difference between Node.js and browser JavaScript:</p>
<ul>
<li>Node.js has no access to browser-specific objects like <code>window</code> or <code>document</code></li>
<li>Browser functions like <code>alert()</code> don't exist in Node.js</li>
<li>Node.js includes server-specific features not available in browsers</li>
</ul>
<p>To run this example, save it as <code>hello.js</code> and execute:</p>
<pre class="hljs"><code><div>node hello.js
</div></code></pre>
<p>This will display &quot;Hello Node!&quot; in your terminal, demonstrating that Node.js is correctly executing JavaScript code outside the browser environment.</p>
<h2 id="2-core-concepts">2. Core Concepts</h2>
<h3 id="21-modules-in-nodejs">2.1 Modules in Node.js</h3>
<p>Modules are the building blocks of Node.js applications. They allow you to organize your code into separate files and reuse functionality across different parts of your application. Node.js supports both CommonJS and ES modules.</p>
<h4 id="commonjs-modules-default">CommonJS Modules (Default)</h4>
<p>CommonJS is the traditional module system in Node.js, using <code>require()</code> and <code>module.exports</code>.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// math.js</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subtract</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a - b;
}
<span class="hljs-built_in">module</span>.exports = { add, subtract };

<span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">const</span> { add, subtract } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./math'</span>);
<span class="hljs-built_in">console</span>.log(add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 8</span>
<span class="hljs-built_in">console</span>.log(subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 2</span>
</div></code></pre>
<h4 id="es-modules-modern">ES Modules (Modern)</h4>
<p>ES Modules (ECMAScript Modules) use <code>import</code> and <code>export</code> statements. To use ES modules, add <code>&quot;type&quot;: &quot;module&quot;</code> to your <code>package.json</code> or use <code>.mjs</code> file extension.</p>
<pre class="hljs"><code><div><span class="hljs-comment">// math.mjs (or math.js with "type": "module")</span>
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a + b;
}
<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subtract</span>(<span class="hljs-params">a, b</span>) </span>{
    <span class="hljs-keyword">return</span> a - b;
}

<span class="hljs-comment">// app.mjs (or app.js with "type": "module")</span>
<span class="hljs-keyword">import</span> { add, subtract } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math.mjs'</span>;
<span class="hljs-built_in">console</span>.log(add(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 8</span>
<span class="hljs-built_in">console</span>.log(subtract(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// 2</span>
</div></code></pre>
<h3 id="22-file-handling-in-nodejs">2.2 File Handling in Node.js</h3>
<p>File handling is crucial for many Node.js applications. The <code>fs</code> module provides both synchronous and asynchronous methods for file operations. While synchronous methods block the event loop, asynchronous methods allow other operations to continue while waiting for file I/O to complete.</p>
<h4 id="synchronous-vs-asynchronous-operations">Synchronous vs Asynchronous Operations</h4>
<ul>
<li><strong>Sync (Blocking):</strong> Synchronous file operations block the event loop until completion, which can lead to performance issues in production applications.</li>
<li><strong>Async (Non-blocking):</strong> Asynchronous file operations allow the event loop to continue running while waiting for the operation to complete, improving scalability and responsiveness.</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// Synchronous (Blocking) - blocks the event loop</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'1'</span>);
<span class="hljs-keyword">const</span> result = fs.readFileSync(<span class="hljs-string">'./contacts.txt'</span>, <span class="hljs-string">'utf8'</span>);
<span class="hljs-built_in">console</span>.log(result);
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'2'</span>);
<span class="hljs-comment">// Output: 1, [file contents], 2</span>

<span class="hljs-comment">// Asynchronous (Non-blocking) - doesn't block the event loop</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'1'</span>);
fs.readFile(<span class="hljs-string">'./contacts.txt'</span>, <span class="hljs-string">'utf8'</span>, (err, result) =&gt; {
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err;
    <span class="hljs-built_in">console</span>.log(result);
});
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'2'</span>);
<span class="hljs-comment">// Output: 1, 2, [file contents]</span>
</div></code></pre>
<h4 id="file-writing-operations">File Writing Operations</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Synchronous write</span>
fs.writeFileSync(<span class="hljs-string">'./file.txt'</span>, <span class="hljs-string">'Hello Write Sync'</span>);

<span class="hljs-comment">// Asynchronous write</span>
fs.writeFile(<span class="hljs-string">'./file.txt'</span>, <span class="hljs-string">'Hello Write Async'</span>, (err) =&gt; {
    <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error writing file:'</span>, err);
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'File written successfully'</span>);
});
</div></code></pre>
<blockquote>
<p>Note: Synchronous operations block the event loop, which can lead to performance issues in production applications. Use asynchronous methods for better scalability and responsiveness.</p>
</blockquote>
<h3 id="23-building-http-server-in-nodejs">2.3 Building HTTP Server in Node.js</h3>
<p>Creating HTTP servers is fundamental to Node.js web development. The built-in <code>http</code> module allows you to create servers that can handle HTTP requests and responses.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Request received: <span class="hljs-subst">${req.method}</span> <span class="hljs-subst">${req.url}</span>`</span>);
    <span class="hljs-comment">// Set response headers</span>
    res.writeHead(<span class="hljs-number">200</span>, { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/plain'</span> });
    <span class="hljs-comment">// Send response</span>
    res.end(<span class="hljs-string">'Hello from Node.js Server!'</span>);
});

server.listen(<span class="hljs-number">3000</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server running on http://localhost:3000'</span>);
});
</div></code></pre>
<h3 id="24-handling-urls">2.4 Handling URLs</h3>
<p>URL handling involves parsing request URLs and routing them to appropriate handlers.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> http = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http'</span>);
<span class="hljs-keyword">const</span> url = <span class="hljs-built_in">require</span>(<span class="hljs-string">'url'</span>);

<span class="hljs-keyword">const</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> parsedUrl = url.parse(req.url, <span class="hljs-literal">true</span>);
    <span class="hljs-keyword">const</span> path = parsedUrl.pathname;
    <span class="hljs-keyword">const</span> query = parsedUrl.query;

    <span class="hljs-keyword">if</span> (path === <span class="hljs-string">'/'</span>) {
        res.end(<span class="hljs-string">'Home Page'</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (path === <span class="hljs-string">'/about'</span>) {
        res.end(<span class="hljs-string">`About Page - Hello <span class="hljs-subst">${query.name || <span class="hljs-string">'Guest'</span>}</span>`</span>);
    } <span class="hljs-keyword">else</span> {
        res.statusCode = <span class="hljs-number">404</span>;
        res.end(<span class="hljs-string">'Page Not Found'</span>);
    }
});

server.listen(<span class="hljs-number">3000</span>);
</div></code></pre>
<h3 id="25-http-methods">2.5 HTTP Methods</h3>
<p>HTTP methods define the type of action to be performed on a resource or data. They are essential for RESTful APIs and web applications.</p>
<ul>
<li><strong>GET</strong>: Retrieve data from the server (read-only).</li>
<li><strong>POST</strong>: Submit data to the server to create a resource.</li>
<li><strong>PUT</strong>: Update or replace existing data on the server completely.</li>
<li><strong>PATCH</strong>: Partially update existing data on the server.</li>
<li><strong>DELETE</strong>: Remove resource or data from the server.</li>
<li><strong>HEAD</strong>: Similar to GET, but only retrieves headers not the body.</li>
<li><strong>OPTIONS</strong>: Retrieve supported HTTP methods for a resource.</li>
</ul>
<h3 id="26-versioning-in-nodejs">2.6 Versioning in Node.js</h3>
<p>Node.js follows semantic versioning (SemVer) with the format <code>MAJOR.MINOR.PATCH</code>.</p>
<ul>
<li>Format: MAJOR.MINOR.PATCH (e.g., 1.2.3)</li>
<li><code>^1.2.3</code>: Compatible with 1.x.x</li>
<li><code>~1.2.3</code>: Compatible with 1.2.x</li>
</ul>
<table>
<thead>
<tr>
<th>Part</th>
<th>Meaning</th>
<th>Example change</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>MAJOR</strong></td>
<td>Breaking changes (incompatible API changes)</td>
<td><code>1.0.0 â†’ 2.0.0</code></td>
</tr>
<tr>
<td><strong>MINOR</strong></td>
<td>New features, backward-compatible</td>
<td><code>1.2.0 â†’ 1.3.0</code></td>
</tr>
<tr>
<td><strong>PATCH</strong></td>
<td>Bug fixes, backward-compatible</td>
<td><code>1.2.3 â†’ 1.2.4</code></td>
</tr>
</tbody>
</table>
<p>Node.js releases:</p>
<ul>
<li><strong>LTS (Long Term Support)</strong>: Even-numbered versions (18, 20, 22) - recommended for production</li>
<li><strong>Current</strong>: Latest features with shorter support cycles</li>
</ul>
<h3 id="27-nodejs-package-manager-npm">2.7 Node.js Package Manager (npm)</h3>
<p>npm (Node Package Manager) is the default package manager for Node.js, used to install, update, and manage third-party packages and libraries. It provides a vast ecosystem of reusable code, making it easy to add functionality to your Node.js applications.</p>
<h4 id="installing-packages">Installing Packages</h4>
<p>To install a package, use the following command:</p>
<pre class="hljs"><code><div>npm install &lt;package-name&gt;
</div></code></pre>
<h4 id="creating-a-packagejson-file">Creating a package.json File</h4>
<p>To create a <code>package.json</code> file, which contains metadata about your project and its dependencies, run:</p>
<pre class="hljs"><code><div>npm init -y
</div></code></pre>
<h4 id="installing-updating-and-removing-packages">Installing, Updating, and Removing Packages</h4>
<p>You can manage packages using npm commands:</p>
<pre class="hljs"><code><div>npm install express
npm update express
npm uninstall express
</div></code></pre>
<h4 id="installing-specific-package-versions">Installing specific package versions</h4>
<p>To install a specific version of a package, you can specify the version number:</p>
<pre class="hljs"><code><div>npm install express@4.18.2
</div></code></pre>
<h4 id="using-npx-node-package-execute">Using npx (Node Package eXecute)</h4>
<p>npx is a package runner tool that comes with npm 5.2+ and allows you to execute packages without installing them globally. This is useful for running command-line tools or scripts locally without cluttering your global namespace.</p>
<pre class="hljs"><code><div>npx create-react-app my-app
</div></code></pre>
<h2 id="3-expressjs-and-apis">3. Express.js and APIs</h2>
<h3 id="31-getting-started-with-express">3.1 Getting Started with Express</h3>
<p>Express.js is a minimal and flexible Node.js web application framework that simplifies building web applications and APIs.</p>
<h4 id="problem-with-vanilla-nodejs">Problem with Vanilla Node.js</h4>
<p>Vanilla Node.js requires a lot of boilerplate code for routing, middleware, and handling requests/responses. Express.js abstracts these complexities and simplifies the process of creating server-side applications with Node.js. There is no need to create the server from scratch, handle routing manually, or manage middleware.</p>
<h4 id="installation-and-basic-setup">Installation and Basic Setup</h4>
<pre class="hljs"><code><div>npm init -y
npm install express
</div></code></pre>
<h4 id="setting-up-a-web-server-in-expressjs">Setting Up a Web Server in Express.js</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = express();

app.get(<span class="hljs-string">'/'</span>, (req, res) =&gt; {
    res.send(<span class="hljs-string">'Welcome to Express!'</span>);
});

app.listen(<span class="hljs-number">3000</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server running on port 3000'</span>);
});
</div></code></pre>
<h3 id="32-what-is-restful-api">3.2 What is RESTful API?</h3>
<p>REST (Representational State Transfer) is an architectural style for designing networked applications. RESTful APIs use standard HTTP methods and are stateless, scalable, and simple to understand.</p>
<h4 id="key-principles-of-rest">Key Principles of REST</h4>
<ul>
<li><strong>Stateless</strong>: Each request contains all necessary information</li>
<li><strong>Client-Server Architecture</strong>: Separation of concerns</li>
<li><strong>Uniform Interface</strong>: Standard HTTP methods and resource identification</li>
<li><strong>Cacheable</strong>: Responses should define cacheability</li>
</ul>
<h3 id="33-building-rest-apis-with-nodejs--express">3.3 Building REST APIs with Node.js + Express</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> app = express();

<span class="hljs-comment">// Middleware for parsing JSON</span>
app.use(express.json());
app.use(express.urlencoded({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">false</span> }));

<span class="hljs-comment">// Sample data</span>
<span class="hljs-keyword">let</span> users = [
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'Deepak Modi'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'deepak@gmail.com'</span> }
];

<span class="hljs-comment">// GET all users</span>
app.get(<span class="hljs-string">'/api/users'</span>, (req, res) =&gt; {
    res.json(users);
});

<span class="hljs-comment">// GET user by ID</span>
app.get(<span class="hljs-string">'/api/users/:id'</span>, (req, res) =&gt; {
    <span class="hljs-keyword">const</span> user = users.find(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.id === <span class="hljs-built_in">parseInt</span>(req.params.id));
    <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
    res.json(user);
});

<span class="hljs-comment">// POST create user</span>
app.post(<span class="hljs-string">'/api/users'</span>, (req, res) =&gt; {
    <span class="hljs-keyword">const</span> newUser = {
        <span class="hljs-attr">id</span>: users.length + <span class="hljs-number">1</span>,
        <span class="hljs-attr">name</span>: req.body.name,
        <span class="hljs-attr">email</span>: req.body.email
    };
    users.push(newUser);
    res.status(<span class="hljs-number">201</span>).json(newUser);
});

<span class="hljs-comment">// PUT update user</span>
app.put(<span class="hljs-string">'/api/users/:id'</span>, (req, res) =&gt; {
    <span class="hljs-keyword">const</span> userIndex = users.findIndex(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.id === <span class="hljs-built_in">parseInt</span>(req.params.id));
    <span class="hljs-keyword">if</span> (userIndex === <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
    
    users[userIndex] = { ...users[userIndex], ...req.body };
    res.json(users[userIndex]);
});

<span class="hljs-comment">// DELETE user</span>
app.delete(<span class="hljs-string">'/api/users/:id'</span>, (req, res) =&gt; {
    <span class="hljs-keyword">const</span> userIndex = users.findIndex(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.id === <span class="hljs-built_in">parseInt</span>(req.params.id));
    <span class="hljs-keyword">if</span> (userIndex === <span class="hljs-number">-1</span>) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
    
    users.splice(userIndex, <span class="hljs-number">1</span>);
    res.status(<span class="hljs-number">204</span>).send();
});

app.listen(<span class="hljs-number">3000</span>, () =&gt; {
	<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server running on port 3000'</span>);
});
</div></code></pre>
<h4 id="running-an-express-server">Running an Express Server</h4>
<ul>
<li>Install Express using <code>npm install express</code>.</li>
<li>Create a file named <code>index.js</code> and add the Express server code.</li>
<li>Add <code>&quot;start&quot;: &quot;node index.js&quot;</code> or <code>&quot;dev&quot;: &quot;nodemon index.js&quot;</code> to your <code>package.json</code> scripts section to easily run your server.</li>
<li>Run commands like <code>npm start</code> or <code>npm run dev</code> to start your Express server.</li>
<li>Use <code>nodemon</code> for automatic server restarts during development by installing it globally with <code>npm install -g nodemon</code> or locally with <code>npm install --save-dev nodemon</code> as a dev dependency in your project.</li>
</ul>
<h4 id="tools-for-testing-rest-apis">Tools for Testing REST APIs</h4>
<ul>
<li><strong>Postman:</strong> A popular tool for testing APIs with a user-friendly interface.</li>
<li><strong>cURL:</strong> A command-line tool for making HTTP requests.</li>
<li><strong>Insomnia:</strong> Another user-friendly API testing tool.</li>
</ul>
<h4 id="best-practices-for-designing-rest-apis">Best Practices for Designing REST APIs</h4>
<ul>
<li>Use meaningful resource names (nouns) in URIs.</li>
<li>Use appropriate HTTP methods for actions (GET for read, POST for create, PUT/PATCH for update, DELETE for delete).</li>
<li>Use status codes to indicate success or failure (e.g., 200 OK, 201 Created, 404 Not Found).</li>
</ul>
<h3 id="34-express-middleware">3.4 Express Middleware</h3>
<p>Middleware functions execute during the request-response cycle and can modify request/response objects, end the request-response cycle, or call the next middleware.</p>
<h4 id="types-of-middleware">Types of Middleware</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// Application-level middleware</span>
app.use(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">${req.method}</span> <span class="hljs-subst">${req.url}</span> - <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>`</span>);
    next();
});

<span class="hljs-comment">// Built-in middleware</span>
app.use(express.json());
app.use(express.static(<span class="hljs-string">'public'</span>));

<span class="hljs-comment">// Router-level middleware</span>
app.use(<span class="hljs-string">'/api'</span>, apiRouter);

<span class="hljs-comment">// Error-handling middleware</span>
app.use(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> {
    <span class="hljs-built_in">console</span>.error(err.stack);
    res.status(<span class="hljs-number">500</span>).send(<span class="hljs-string">'Something broke!'</span>);
});
</div></code></pre>
<h3 id="35-http-headers-in-apis">3.5 HTTP Headers in APIs</h3>
<p>HTTP headers provide additional information about the request or response.</p>
<pre class="hljs"><code><div>app.get(<span class="hljs-string">'/api/users'</span>, (req, res) =&gt; {
    <span class="hljs-comment">// Set response headers</span>
    res.set({
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
        <span class="hljs-string">'X-Powered-By'</span>: <span class="hljs-string">'Node.js'</span>
    });
    
    <span class="hljs-comment">// Access request headers</span>
    <span class="hljs-keyword">const</span> userAgent = req.get(<span class="hljs-string">'User-Agent'</span>);
    <span class="hljs-keyword">const</span> authorization = req.headers.authorization;
    
    res.json(users);
});
</div></code></pre>
<h3 id="36-http-status-codes">3.6 HTTP Status Codes</h3>
<p>HTTP status codes indicate the result of the HTTP request:</p>
<h4 id="common-status-codes">Common Status Codes</h4>
<ul>
<li>
<p><strong>2xx Success</strong></p>
<ul>
<li>200 OK: Request successful</li>
<li>201 Created: Resource created successfully</li>
<li>204 No Content: Request successful, no content to return</li>
</ul>
</li>
<li>
<p><strong>4xx Client Error</strong></p>
<ul>
<li>400 Bad Request: Invalid request</li>
<li>401 Unauthorized: Authentication required</li>
<li>403 Forbidden: Access denied</li>
<li>404 Not Found: Resource not found</li>
</ul>
</li>
<li>
<p><strong>5xx Server Error</strong></p>
<ul>
<li>500 Internal Server Error: Server error</li>
<li>503 Service Unavailable: Server temporarily unavailable</li>
</ul>
</li>
</ul>
<h3 id="37-introduction-to-postman">3.7 Introduction to POSTMAN</h3>
<p>Postman is a popular API testing tool that allows you to test your REST APIs easily with a user-friendly interface.</p>
<h4 id="installing-postman">Installing Postman</h4>
<ul>
<li>Download Desktop app: <a href="https://www.postman.com/downloads/">Postman Desktop</a></li>
<li>Use Postman Web: <a href="https://www.postman.com/">Postman Web</a></li>
<li>Install VS Code extension: <a href="https://marketplace.visualstudio.com/items?itemName=postman.postman-for-vscode">Postman for VS Code</a></li>
</ul>
<h4 id="using-postman-for-api-testing">Using Postman for API Testing</h4>
<ol>
<li>
<p><strong>GET Request</strong>: Test retrieving data</p>
<ul>
<li>URL: <code>http://localhost:3000/api/users</code></li>
<li>Method: GET</li>
</ul>
</li>
<li>
<p><strong>POST Request</strong>: Test creating data</p>
<ul>
<li>URL: <code>http://localhost:3000/api/users</code></li>
<li>Method: POST</li>
<li>Body: <code>{ &quot;name&quot;: &quot;Ranjit Barnwal&quot;, &quot;email&quot;: &quot;ranjit@gmail.com&quot; }</code></li>
</ul>
</li>
<li>
<p><strong>PUT Request</strong>: Test updating data</p>
<ul>
<li>URL: <code>http://localhost:3000/api/users/1</code></li>
<li>Method: PUT</li>
<li>Body: <code>{ &quot;name&quot;: &quot;Krishna Agarwal&quot;, &quot;email&quot;: &quot;krishna@example.com&quot; }</code></li>
</ul>
</li>
<li>
<p><strong>DELETE Request</strong>: Test deleting data</p>
<ul>
<li>URL: <code>http://localhost:3000/api/users/1</code></li>
<li>Method: DELETE</li>
</ul>
</li>
</ol>
<h2 id="4-database-integration">4. Database Integration</h2>
<h3 id="41-introduction-to-mongodb">4.1 Introduction to MongoDB</h3>
<p>MongoDB is a popular NoSQL database that stores data in flexible, JSON-like documents. It's well-suited for Node.js applications due to its JavaScript-like syntax and scalability.</p>
<h4 id="why-mongodb-with-nodejs">Why MongoDB with Node.js?</h4>
<ul>
<li><strong>JSON-like Documents</strong>: Natural fit with JavaScript objects</li>
<li><strong>Flexible Schema</strong>: Easy to modify data structure</li>
<li><strong>Scalability</strong>: Handles large amounts of data efficiently</li>
<li><strong>Rich Query Language</strong>: Powerful querying capabilities</li>
</ul>
<h4 id="mongodb-concepts">MongoDB Concepts</h4>
<ul>
<li><strong>Database</strong>: Collection of collections</li>
<li><strong>Collection</strong>: Group of documents (similar to table in SQL)</li>
<li><strong>Document</strong>: Individual record (similar to row in SQL)</li>
<li><strong>Field</strong>: Key-value pair in document (similar to column in SQL)</li>
</ul>
<h3 id="42-connecting-nodejs-with-mongodb-mongoose--express">4.2 Connecting Node.js with MongoDB (Mongoose + Express)</h3>
<p>Mongoose is an Object Data Modeling (ODM) library for MongoDB and Node.js that provides schema validation, casting, and business logic hooks.</p>
<h4 id="installation-and-setup">Installation and Setup</h4>
<pre class="hljs"><code><div>npm install mongoose
</div></code></pre>
<h4 id="basic-connection">Basic Connection</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);

<span class="hljs-comment">// Connect to MongoDB</span>
mongoose.connect(<span class="hljs-string">'mongodb://localhost:27017/myapp'</span>, {
    <span class="hljs-attr">useNewUrlParser</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">useUnifiedTopology</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-comment">// Connection events</span>
mongoose.connection.on(<span class="hljs-string">'connected'</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Connected to MongoDB'</span>);
});

mongoose.connection.on(<span class="hljs-string">'error'</span>, (err) =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'MongoDB connection error:'</span>, err);
});
</div></code></pre>
<h4 id="defining-schemas-and-models">Defining Schemas and Models</h4>
<pre class="hljs"><code><div><span class="hljs-comment">// User schema</span>
<span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> mongoose.Schema({
    <span class="hljs-attr">name</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">trim</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">email</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">lowercase</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">age</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-built_in">Number</span>,
        <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">max</span>: <span class="hljs-number">120</span>
    },
    <span class="hljs-attr">createdAt</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-built_in">Date</span>,
        <span class="hljs-attr">default</span>: <span class="hljs-built_in">Date</span>.now
    }
});

<span class="hljs-comment">// Create model</span>
<span class="hljs-keyword">const</span> User = mongoose.model(<span class="hljs-string">'User'</span>, userSchema);

<span class="hljs-built_in">module</span>.exports = User;
</div></code></pre>
<h4 id="crud-operations-with-mongoose">CRUD Operations with Mongoose</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> User = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./models/User'</span>);

<span class="hljs-comment">// Create user</span>
app.post(<span class="hljs-string">'/api/users'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> User(req.body);
        <span class="hljs-keyword">await</span> user.save();
        res.status(<span class="hljs-number">201</span>).json(user);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">400</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
});

<span class="hljs-comment">// Get all users</span>
app.get(<span class="hljs-string">'/api/users'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> User.find();
        res.json(users);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">500</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
});

<span class="hljs-comment">// Get user by ID</span>
app.get(<span class="hljs-string">'/api/users/:id'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findById(req.params.id);
        <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
        res.json(user);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">500</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
});

<span class="hljs-comment">// Update user</span>
app.put(<span class="hljs-string">'/api/users/:id'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findByIdAndUpdate(
            req.params.id, 
            req.body, 
            { <span class="hljs-attr">new</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">runValidators</span>: <span class="hljs-literal">true</span> }
        );
        <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
        res.json(user);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">400</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
});

<span class="hljs-comment">// Delete user</span>
app.delete(<span class="hljs-string">'/api/users/:id'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findByIdAndDelete(req.params.id);
        <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
        res.status(<span class="hljs-number">204</span>).send();
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">500</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
});
</div></code></pre>
<h3 id="43-mvc-pattern-in-nodejs">4.3 MVC Pattern in Node.js</h3>
<p>MVC (Model-View-Controller) is an architectural pattern that separates application logic into three interconnected components.</p>
<h4 id="mvc-structure">MVC Structure</h4>
<pre class="hljs"><code><div>project/
â”œâ”€â”€ models/
â”‚   â””â”€â”€ User.js
â”œâ”€â”€ views/
â”‚   â””â”€â”€ users.ejs
â”œâ”€â”€ controllers/
â”‚   â””â”€â”€ userController.js
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ userRoutes.js
â””â”€â”€ app.js
</div></code></pre>
<h4 id="model-modelsuserjs">Model (models/User.js)</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);

<span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> mongoose.Schema({
    <span class="hljs-attr">name</span>: { <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">email</span>: { <span class="hljs-attr">type</span>: <span class="hljs-built_in">String</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span> },
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">Number</span>
});

<span class="hljs-built_in">module</span>.exports = mongoose.model(<span class="hljs-string">'User'</span>, userSchema);
</div></code></pre>
<h4 id="controller-controllersusercontrollerjs">Controller (controllers/userController.js)</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> User = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../models/User'</span>);

exports.getAllUsers = <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> User.find();
        res.json(users);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">500</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
};

exports.createUser = <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> User(req.body);
        <span class="hljs-keyword">await</span> user.save();
        res.status(<span class="hljs-number">201</span>).json(user);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">400</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
};

exports.getUserById = <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> User.findById(req.params.id);
        <span class="hljs-keyword">if</span> (!user) <span class="hljs-keyword">return</span> res.status(<span class="hljs-number">404</span>).json({ <span class="hljs-attr">message</span>: <span class="hljs-string">'User not found'</span> });
        res.json(user);
    } <span class="hljs-keyword">catch</span> (error) {
        res.status(<span class="hljs-number">500</span>).json({ <span class="hljs-attr">error</span>: error.message });
    }
};
</div></code></pre>
<h4 id="routes-routesuserroutesjs">Routes (routes/userRoutes.js)</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> userController = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../controllers/userController'</span>);

<span class="hljs-keyword">const</span> router = express.Router();

router.get(<span class="hljs-string">'/'</span>, userController.getAllUsers);
router.post(<span class="hljs-string">'/'</span>, userController.createUser);
router.get(<span class="hljs-string">'/:id'</span>, userController.getUserById);

<span class="hljs-built_in">module</span>.exports = router;
</div></code></pre>
<h4 id="main-app-appjs">Main App (app.js)</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);
<span class="hljs-keyword">const</span> userRoutes = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./routes/userRoutes'</span>);

<span class="hljs-keyword">const</span> app = express();

<span class="hljs-comment">// Middleware</span>
app.use(express.json());

<span class="hljs-comment">// Routes</span>
app.use(<span class="hljs-string">'/api/users'</span>, userRoutes);

<span class="hljs-comment">// Connect to MongoDB</span>
mongoose.connect(<span class="hljs-string">'mongodb://localhost:27017/myapp'</span>);

app.listen(<span class="hljs-number">3000</span>, () =&gt; {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Server running on port 3000'</span>);
});
</div></code></pre>
<p>This MVC structure provides better organization, maintainability, and separation of concerns in your Node.js applications.</p>

</body>
</html>
